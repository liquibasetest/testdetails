import boto3

# Initialize the S3 client
s3_client = boto3.client('s3')

def list_all_subfolders(bucket_name, prefix='', delimiter='/'):
    subfolder_paths = []

    # List objects in the bucket, with the specified prefix (subfolder)
    objects_response = s3_client.list_objects_v2(Bucket=bucket_name, Prefix=prefix, Delimiter=delimiter)

    # Iterate through common prefixes (subfolders)
    for prefix in objects_response.get('CommonPrefixes', []):
        subfolder_name = prefix['Prefix']
        subfolder_paths.append(subfolder_name)
        subfolder_paths.extend(list_all_subfolders(bucket_name, prefix=subfolder_name))  # Recurse into subfolders

    return subfolder_paths

try:
    # Specify the bucket name
    bucket_name = 'your-bucket-name'

    # List all subfolders recursively
    subfolder_paths = list_all_subfolders(bucket_name)

    # Print the subfolder paths
    for path in subfolder_paths:
        print("Subfolder:", path)

except Exception as e:
    print("Error:", e)
